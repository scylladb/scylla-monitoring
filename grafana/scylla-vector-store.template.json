{
    "dashboard": {
        "class": "dashboard",
        "uid": "vector-store-__SCYLLA_VERSION_DASHED__",
        "originalTitle": "Vector Store",
        "rows": [
            {
                "class": "row",
                "height": "150px",
                "panels": [
                    {
                        "class": "small_stat",
                        "gridPos": {
                            "w": 4,
                            "h": 5
                        },
                        "title": "Status",
                        "targets": [
                            {
                                "expr": "count(scrape_samples_scraped{job=\"vector_store\"}) OR vector(0)",
                                "intervalFactor": 1,
                                "refId": "A",
                                "step": 40
                            }
                        ],
                        "fieldConfig": {
                            "defaults": {
                                "noValue": " Offline",
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                        {
                                            "color": "red",
                                            "value": null
                                        },
                                        {
                                            "color": "green",
                                            "value": 1
                                        }
                                    ]
                                },
                                "mappings": [
                                    {
                                        "from": "",
                                        "id": 0,
                                        "text": "Offline",
                                        "to": "",
                                        "type": 1,
                                        "value": "0"
                                    },
                                    {
                                        "from": "",
                                        "id": 1,
                                        "text": "Online",
                                        "to": "",
                                        "type": 1,
                                        "value": "1"
                                    }
                                ]
                            }
                        }
                    },
                    {
                        "class": "small_stat",
                        "targets": [
                            {
                                "expr": "count(index_size{job=\"vector_store\"})",
                                "intervalFactor": 1,
                                "legendFormat": "",
                                "refId": "A",
                                "step": 40
                            }
                        ],
                        "gridPos": {
                            "w": 3,
                            "h": 5
                        },
                        "title": "# Indexes"
                    },
                    {
                        "class": "small_stat",
                        "type": "piechart",
                        "fieldConfig": {
                            "defaults": {
                              "custom": {
                                "hideFrom": {
                                  "tooltip": false,
                                  "viz": false,
                                  "legend": false
                                }
                              },
                              "color": {
                                "mode": "palette-classic"
                              },
                              "mappings": [],
                              "decimals": 0,
                              "min": 0,
                              "unit": "decbytes"
                            },
                            "overrides": []
                          },
                        "gridPos": {
                            "w": 3,
                            "h": 5
                        },
                        "targets": [
                            {
                              "expr": "sum(node_filesystem_size_bytes{job=\"vector_store_os\"}) - sum(node_filesystem_avail_bytes{job=\"vector_store_os\"})",
                              "instant": true,
                              "interval": "",
                              "legendFormat": "Used",
                              "refId": "A",
                              "datasource": {
                                "uid": "P1809F7CD0C75ACF3",
                                "type": "prometheus"
                              },
                              "editorMode": "code"
                            },
                            {
                              "refId": "B",
                              "expr": "sum(node_filesystem_avail_bytes{job=\"vector_store_os\"})",
                              "range": true,
                              "instant": false,
                              "datasource": {
                                "uid": "P1809F7CD0C75ACF3",
                                "type": "prometheus"
                              },
                              "hide": false,
                              "editorMode": "code",
                              "legendFormat": "Free"
                            }
                          ],
                          "options": {
                            "reduceOptions": {
                              "values": false,
                              "calcs": [
                                "last"
                              ],
                              "fields": ""
                            },
                            "pieType": "pie",
                            "tooltip": {
                              "mode": "single",
                              "sort": "none",
                              "hideZeros": false
                            },
                            "legend": {
                              "showLegend": false,
                              "displayMode": "list",
                              "placement": "bottom"
                            },
                            "colorMode": "value",
                            "graphMode": "none",
                            "justifyMode": "auto",
                            "orientation": "auto",
                            "textMode": "auto",
                            "displayLabels": [
                              "percent",
                              "value",
                              "name"
                            ]
                          }
                    },
                    {
                        "class": "small_stat",
                        "fieldConfig": {
                            "defaults": {
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                        {
                                            "color": "green",
                                            "value": null
                                        }
                                    ]
                                },
                                "unit": "decbytes"
                            },
                            "overrides": []
                        },
                        "gridPos": {
                            "w": 3,
                            "h": 5
                        },
                        "targets": [
                            {
                                "expr": "sum(node_filesystem_size_bytes{job=\"vector_store_os\"})-sum(node_filesystem_avail_bytes{job=\"vector_store_os\"})",
                                "intervalFactor": 1,
                                "legendFormat": "",
                                "refId": "A",
                                "step": 40
                            }
                        ],
                        "title": "Disk Usage"
                    },
                    {
                        "class": "small_stat_area",
                        "description": "",
                        "fieldConfig": {
                            "defaults": {
                                "custom": {},
                                "unit": "percent",
                                "decimals": 0,
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                        {
                                            "color": "green",
                                            "value": null
                                        },
                                        {
                                            "color": "red",
                                            "value": 90
                                        }
                                    ]
                                },
                                "mappings": []
                            },
                            "overrides": []
                        },
                        "targets": [
                            {
                                "expr": "100*avg(sum(rate(node_cpu_seconds_total{job=\"vector_store_os\", mode!~\"idle\"}[1m])) by(cpu))",
                                "refId": "A"
                            }
                        ],
                        "gridPos": {
                            "w": 3,
                            "h": 5
                        },
                        "title": "CPU"
                    },
                    {
                        "class": "small_stat_area",
                        "fieldConfig": {
                            "defaults": {
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                        {
                                            "color": "green",
                                            "value": null
                                        },
                                        {
                                            "color": "red",
                                            "value": 0.8
                                        }
                                    ]
                                },
                                "unit": "percentunit",
                                "min": 0,
                                "max": 1,
                                "decimals": 0
                            },
                            "overrides": []
                        },
                        "gridPos": {
                            "w": 3,
                            "h": 5
                        },
                        "targets": [
                            {
                                "expr": "1-avg(node_memory_MemAvailable_bytes{job=\"vector_store_os\"})/avg(node_memory_MemTotal_bytes{job=\"vector_store_os\"})",
                                "intervalFactor": 1,
                                "legendFormat": "Used",
                                "refId": "A",
                                "step": 40
                            }
                        ],
                        "title": "Memory % Usage"
                    },
                    {
                        "class": "small_stat_area",
                        "fieldConfig": {
                            "defaults": {
                                "mappings": [],
                                "thresholds": {
                                    "mode": "absolute",
                                    "steps": [
                                        {
                                            "color": "green",
                                            "value": null
                                        }
                                    ]
                                },
                                "unit": "decbytes",
                                "min": 0
                            },
                            "overrides": []
                        },
                        "gridPos": {
                            "w": 3,
                            "h": 5
                        },
                        "targets": [
                            {
                                "expr": "avg(node_memory_MemTotal_bytes{job=\"vector_store_os\"})-avg(node_memory_MemAvailable_bytes{job=\"vector_store_os\"})",
                                "intervalFactor": 1,
                                "legendFormat": "Used",
                                "refId": "A",
                                "step": 40
                            }
                        ],
                        "title": "Memory Usage"
                    }
                ],
                "title": "Summary row"
            },
            {
                "class": "row",
                "panels": [
                    {
                        "class": "collapsible_row_panel",
                        "repeat": "index",
                        "collapsed": false,
                        "title": "$index"
                    }
                ]
            },
            {
                "class": "row",
                "panels": [
                    {
                        "class": "graph_panel",
                        "targets": [
                            {
                                "expr": "index_size{index_name=\"$index\"}",
                                "format": "time_series",
                                "intervalFactor": 2,
                                "refId": "A",
                                "legendFormat": "{{keyspace}} {{index_name}}"
                            }
                        ],
                        "span": 2,
                        "title": "Index Size"
                    },
                    {
                        "class": "ops_panel",
                        "targets": [
                            {
                                "expr": "rate(index_size{index_name=\"$index\"}[$__rate_interval])",
                                "format": "time_series",
                                "intervalFactor": 2,
                                "refId": "A",
                                "legendFormat": "{{keyspace}} {{index_name}}"
                            }
                        ],
                        "span": 2,
                        "title": "Index build rate"
                    },
                    {
                        "class": "ops_panel",
                        "targets": [
                            {
                                "expr": "rate(request_latency_seconds_count{index_name=\"$index\"}[$__rate_interval])",
                                "format": "time_series",
                                "intervalFactor": 2,
                                "refId": "A",
                                "legendFormat": "{{keyspace}} {{index_name}}"
                            }
                        ],
                        "span": 2,
                        "title": "Index requests rate"
                    },
                    {
                        "class": "seconds_panel",
                        "targets": [
                            {
                                "expr": "rate(request_latency_seconds_sum{index_name=\"$index\"}[$__rate_interval])/rate(request_latency_seconds_count{index_name=\"$index\"}[$__rate_interval])",
                                "format": "time_series",
                                "intervalFactor": 2,
                                "refId": "A",
                                "legendFormat": "{{keyspace}} {{index_name}}"
                            }
                        ],
                        "span": 2,
                        "title": "Average Latency"
                    },
                    {
                        "class": "seconds_panel",
                        "targets": [
                            {
                                "expr": "histogram_quantile(0.95, sum(rate(request_latency_seconds_bucket{index_name=\"$index\"}[$__rate_interval])) by (keyspace,index_name, le))",
                                "format": "time_series",
                                "intervalFactor": 2,
                                "refId": "A",
                                "legendFormat": "{{keyspace}} {{index_name}}"
                            }
                        ],
                        "span": 2,
                        "title": "P95 Latency"
                    },
                    {
                        "class": "seconds_panel",
                        "targets": [
                            {
                                "expr": "histogram_quantile(0.99, sum(rate(request_latency_seconds_bucket{index_name=\"$index\"}[$__rate_interval])) by (keyspace,index_name, le))",
                                "format": "time_series",
                                "intervalFactor": 2,
                                "refId": "A",
                                "legendFormat": "{{keyspace}} {{index_name}}"
                            }
                        ],
                        "span": 2,
                        "title": "P99 Latency"
                    }

                ],
                "title": "Index Row"
            },
            {
                "class": "monitoring_version_row"
            }
        ],
        "annotations": {
            "list": []
        },
        "templating": {
            "list": [
                {
                    "class": "template_variable_all",
                    "label": "index",
                    "name": "index",
                    "query": "label_values(index_size{},index_name)",
                    "sort": 3
                },
                {
                    "class": "template_variable_custom",
                    "current": {
                        "text": "__SCYLLA_VERSION_DOT__",
                        "value": "__SCYLLA_VERSION_DOT__"
                    },
                    "name": "scylla_version",
                    "options": [
                        {
                            "selected": true,
                            "text": "__SCYLLA_VERSION_DOT__",
                            "value": "__SCYLLA_VERSION_DOT__"
                        }
                    ],
                    "query": "__SCYLLA_VERSION_DOT__"
                },
                {
                    "class": "monitor_version_var"
                }
            ]
        },
        "tags": [
            "__SCYLLA_VERSION_DOT__"
        ],
        "time": {
            "from": "now-30m",
            "to": "now"
        },
        "title": "Vector Store",
        "overwrite": true,
        "version": 3
    }
}
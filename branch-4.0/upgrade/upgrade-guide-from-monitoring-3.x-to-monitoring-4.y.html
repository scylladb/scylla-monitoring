

<!DOCTYPE html>
<html class="no-js" lang="en" style="visibility: hidden;">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Upgrade Guide - Scylla Monitoring 3.x to Scylla Monitoring 4.y | ScyllaDB Docs 
        </title>
        <meta name="description" content="Scylla Monitoring Stack is a full stack for Scylla monitoring and alerting. The stack contains open source tools including Prometheus and Grafana, as well as custom Scylla dashboards and tooling." />
        <link rel="icon" href="../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../_static/img/favicon-228x228.png" />

        
            
            
        

        
            
            <link rel="canonical" href="https://monitoring.docs.scylladb.com/stable/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                  href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>

        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.css">
        <script type="module" src="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.esm.js"></script>
        
        
        
            
                <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/css/main.css?v=e3ce25dc" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/sphinx_collapse.css?v=226d88b4" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
            
        
    
        
        
            
        <script type="text/javascript" src="../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../_static/js/main.bundle.js"></script>
        
            
                <script src="../_static/documentation_options.js?v=5929fcd5"></script>
            
        
            
                <script src="../_static/doctools.js?v=9a2dae69"></script>
            
        
            
                <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
            
        
            
                <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
            
        
            
                <script src="../_static/copybutton.js?v=f281be69"></script>
            
        
    
            
                <!-- Local meta tags -->
            
            
                <!-- Google Tag Manager docs -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-54NWVS4");
</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager global -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
            
        
    </head>

    <body class="brand-product">
        <section class="promo-banner  promo-banner--hide" style="display: none;">
    <div class="promo-banner-wrapper">
        
        <div class="promo-banner__title">ScyllaDB University Live | Free Virtual Training Event</div>
        <a class="promo-banner__button button button--reverse" href="#"
           target="_blank" rel="noopener noreferrer">Learn more</a>
        <button class="promo-banner__close">
            <i class="icon-cancel"></i>
        </button>
    </div>
</section>
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../_static/img/scylladb-logo-horizontal.svg" alt="ScyllaDB Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Deployments <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="icon-docs-cloud"></i>Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/manual/">
                            <i class="icon-server"></i>Server</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="icon-docs-manager"></i>ScyllaDB Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="icon-docs-monitoring"></i>ScyllaDB
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="icon-docs-operator"></i>ScyllaDB Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/manual/stable/using-scylla/drivers/cql-drivers/">
                            <i class="icon-docs-nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/manual/stable/using-scylla/drivers/dynamo-drivers/">
                            <i class="icon-docs-alternator"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Resources
                    <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://university.scylladb.com">
                            <i class="icon-university"></i>
                            ScyllaDB University
                        </a>
                    </li>
                    <li>
                        <a href="https://forum.scylladb.com">
                            <i class="icon-docs-community"></i>
                            Community Forum
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/stable/get-started/develop-with-scylladb/tutorials-example-projects.html">
                            <i class="icon-docs-training"></i>
                            Tutorials
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://docs.scylladb.com/manual/stable/getting-started/installation-common/scylla-web-installer.html" class="button"><i class="icon-download me-2"></i> Install</a>
        </div>
    </div>
    <div class="header-search-box">
        <i class="dark-theme-toggler icon-theme"></i>
        <div class="search-box">
            <ci-search></ci-search>
        </div>
        
            <biel-button class="header-ask-ai" project="ddfdo8m94k" 
                header-title="ScyllaDB chatbot (beta)"
                button-position="default"
                modal-position="bottom-right"
                button-style="dark">
                Ask AI
            </biel-button>
        
    </div>
    <div class="side-nav-toggle">
    <i class="dark-theme-toggler icon-theme"></i>
    <div class="side-nav-toggle__button" data-toggle="side-nav">
        <i class="icon-menu"></i>
    </div>
</div>
</header>
        <div class="title"></div>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://docs.scylladb.com"
           class="bread__highlight">
            <i class="icon-home"></i> ScyllaDB Docs
        </a>
    </span>
    <span class="bread__item">
        <a href="../index.html"
           class="bread__highlight">
            ScyllaDB Monitoring
        </a>
    </span>
    
        <span class="bread__item">
            <a href="index.html" class="bread__highlight">
                Upgrade Scylla Monitoring Stack
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Upgrade Guide - Scylla Monitoring 3.x to Scylla Monitoring 4.y</span>
</div>
                    </div>
                
                
                <div class="sidebar-right-layout">
                    <div class="body-container">
                

                    <div class="content-body">
                        
                            
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a previous version of ScyllaDB Monitoring.
            
            <a href="../../stable/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">Switch to the latest stable version.</a>
        </p>
    </div>

                        
                        
                        <section id="upgrade-guide-scylla-monitoring-3-x-to-scylla-monitoring-4-y">
<h1>Upgrade Guide - Scylla Monitoring 3.x to Scylla Monitoring 4.y<a class="headerlink" href="#upgrade-guide-scylla-monitoring-3-x-to-scylla-monitoring-4-y" title="Link to this heading">¶</a></h1>
<p>This document is a step by step procedure for upgrading <a class="reference external" href="/operating-scylla/monitoring/3.0">Scylla Monitoring Stack</a> from version 3.x to 4.y, for example, between 3.9 to 4.0.0.</p>
<section id="upgrade-procedure">
<h2>Upgrade Procedure<a class="headerlink" href="#upgrade-procedure" title="Link to this heading">¶</a></h2>
<p>We recommend installing the new release next to the old one. You can run both monitoring stacks in parallel, ensuring it is working as expected before uninstalling the old version.</p>
<p>Change to the directory you want to install the new Monitoring stack.
Download the latest release in the .zip or .tar format.</p>
<section id="install-4-y-the-new-version">
<h3>Install 4.y (The new version)<a class="headerlink" href="#install-4-y-the-new-version" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>-L<span class="w"> </span>https://github.com/scylladb/scylla-monitoring/archive/scylla-monitoring-4.y.zip
unzip<span class="w"> </span>scylla-monitoring-4.y.zip
<span class="nb">cd</span><span class="w"> </span>scylla-monitoring-scylla-monitoring-4.y/
</pre></div>
</div>
<p>Replace “y” with the new minor and patch release number, for example, 4.0.0.zip</p>
</section>
<section id="setting-the-server-s-files">
<h3>Setting the server’s files<a class="headerlink" href="#setting-the-server-s-files" title="Link to this heading">¶</a></h3>
<p>Copy the <code class="docutils literal notranslate"><span class="pre">scylla_servers.yml</span></code> and <code class="docutils literal notranslate"><span class="pre">scylla_manager_servers.yml</span></code> from the version that is already installed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>/path/to/monitoring/3.x/prometheus/scylla_servers.yml<span class="w"> </span>prometheus/
cp<span class="w"> </span>/path/to/monitoring/3.x/prometheus/scylla_manager_servers.yml.yml<span class="w"> </span>prometheus/
</pre></div>
</div>
</section>
<section id="validate-the-new-version-is-running-the-correct-version">
<h3>Validate the new version is running the correct version<a class="headerlink" href="#validate-the-new-version-is-running-the-correct-version" title="Link to this heading">¶</a></h3>
<p>run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./start-all.sh<span class="w"> </span>--version
</pre></div>
</div>
<p>To validate the Scylla-Monitoring version.</p>
</section>
</section>
<section id="running-in-test-mode">
<h2>Running in test mode<a class="headerlink" href="#running-in-test-mode" title="Link to this heading">¶</a></h2>
<p>This section is optional. It shows you how to run two monitoring stacks side by side. You can skip this section entirely and move to
switching to the new version section.</p>
<section id="running-second-monitoring-stack">
<h3>Running second monitoring stack<a class="headerlink" href="#running-second-monitoring-stack" title="Link to this heading">¶</a></h3>
<p>We need to use different ports to run two monitoring stacks in parallel (i.e., the older 3.x version and the new 4.x stack).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./start-all.sh<span class="w"> </span>-p<span class="w"> </span><span class="m">9091</span><span class="w"> </span>-g<span class="w"> </span><span class="m">3001</span><span class="w"> </span>-m<span class="w"> </span><span class="m">9095</span>
</pre></div>
</div>
<p>Browse to <code class="docutils literal notranslate"><span class="pre">http://{ip}:9091</span></code> and check the Grafana dashboard.</p>
<p>Note that we are using different port numbers for Grafana, Prometheus, and the Alertmanager.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Important: do not use the local dir flag when testing!</p>
</div>
<p>When you are satisfied with the data in the dashboard, you can shut down the containers.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Important: Do not kill the 3.x version that is currently running!</p>
</div>
</section>
<section id="killing-the-new-4-y-monitoring-stack-in-testing-mode">
<h3>Killing the new 4.y Monitoring stack in testing mode<a class="headerlink" href="#killing-the-new-4-y-monitoring-stack-in-testing-mode" title="Link to this heading">¶</a></h3>
<p>Use the following command to kill the containers:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./kill-all.sh<span class="w"> </span>-p<span class="w"> </span><span class="m">9091</span><span class="w"> </span>-g<span class="w"> </span><span class="m">3001</span><span class="w"> </span>-m<span class="w"> </span><span class="m">9095</span>
</pre></div>
</div>
<p>You can start and stop the new 4.y version while testing.</p>
</section>
</section>
<section id="migrating">
<h2>Migrating<a class="headerlink" href="#migrating" title="Link to this heading">¶</a></h2>
<section id="move-to-version-4-y-the-new-version">
<h3>Move to version 4.y (the new version)<a class="headerlink" href="#move-to-version-4-y-the-new-version" title="Link to this heading">¶</a></h3>
<p>Note: migrating will cause a few seconds of blackout in the system.</p>
<p>We assume that you are using external volume to store the metrics data.</p>
<section id="backup">
<h4>Backup<a class="headerlink" href="#backup" title="Link to this heading">¶</a></h4>
<p>We suggest to copy the Prometheus external directory first and use the copy as the data directory for the new monitoring stack.
Newer Monitoring stack uses newer Promethues versions, and keeping a backup of the prometheus dir would allow you to rollback.</p>
</section>
<section id="kill-all-containers">
<h4>Kill all containers<a class="headerlink" href="#kill-all-containers" title="Link to this heading">¶</a></h4>
<p>At this point you have two monitoring stacks installed with the older version running.</p>
<p>If you run the new version in testing mode kill it by following the instructions on how to <a class="reference internal" href="#killing-the-new-4-y-monitoring-stack-in-testing-mode">Killing the new 4.y Monitoring stack in testing mode</a>
in the previous section.</p>
<p>kill the older 3.x version containers by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./kill-all.sh
</pre></div>
</div>
<p>Start version 4.y in normal mode</p>
<p>From the new root of the <cite>scylla-monitoring-scylla-monitoring-4.y</cite> run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./start-all.sh<span class="w"> </span>-d<span class="w"> </span>/path/to/copy/data/dir
</pre></div>
</div>
<p>Point your browser to <code class="docutils literal notranslate"><span class="pre">http://{ip}:3000</span></code> and see that the data is there.</p>
</section>
</section>
<section id="rollback-to-version-3-x">
<h3>Rollback to version 3.x<a class="headerlink" href="#rollback-to-version-3-x" title="Link to this heading">¶</a></h3>
<p>To rollback during the testing mode, follow <a class="reference internal" href="#killing-the-new-4-y-monitoring-stack-in-testing-mode">Killing the new 4.y Monitoring stack in testing mode</a> as explained previously
and the system will continue to operate normally.</p>
<p>To rollback to version 3.x after you completed moving to version 4.y (as shown above), run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./kill-all.sh
<span class="nb">cd</span><span class="w"> </span>/path/to/scylla-grafana-3.x/
./start-all.sh<span class="w"> </span>-d<span class="w"> </span>/path/to/original/data/dir
</pre></div>
</div>
</section>
</section>
<section id="post-installation-metrics-back-filling">
<h2>Post-installation: Metrics back-filling<a class="headerlink" href="#post-installation-metrics-back-filling" title="Link to this heading">¶</a></h2>
<p>Starting from Scylla Monitoring version 3.8, Scylla Monitoring uses Prometheus’s recording rules for performance reasons.
Recording rules perform some of the calculations when collecting the metrics instead of when showing the dashboards.</p>
<p>For example, this is a recording rule that calculates the p99 write latency:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">record</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wlatencyp99</span>
<span class="w">  </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">histogram_quantile(0.99, sum(rate(scylla_storage_proxy_coordinator_write_latency_bucket{}[60s])) by (cluster, dc, instance, shard, scheduling_group_name, le))</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">by</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;instance,shard&quot;</span>
</pre></div>
</div>
<p>For a transition period, Scylla Monitoring version 3.x has a fall-back mechanism that if those recording rules
are not present data will still be shown.</p>
<p>Scylla Monitoring versions 4.0 and newer will rely only on recording rules.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you upgrade from a version older than 3.8 without back-filling, latency historical data will not be shown.</p>
</div>
</div></blockquote>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../_images/before-backfilling.png"><img alt="../_images/before-backfilling.png" src="../_images/before-backfilling.png" style="width: 400pt;" />
</a>
<figcaption>
<p><span class="caption-text"><strong>This is an example of missing latency graph</strong></span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The following instructions are only relevant if you are upgrading from a version older than 3.8 to version 4.0 or higher,
or if you are looking at historical data collected before you upgraded to 3.8.</p>
<p>For example, you keep your data (retention period) for a year, and you upgraded to version 3.8 three months ago.</p>
<p>In this example you have recording rules data only for the last three months, to be able to look at older latency
information you will need to back-fill that missing period.</p>
<p>The following instructions are based on the recording rules backfilling section in the <a class="reference external" href="https://prometheus.io/docs/prometheus/latest/storage/#backfilling-for-recording-rules">Prometheus documentation</a>.</p>
<section id="determine-the-backfilling-period">
<h3>Determine the backfilling period<a class="headerlink" href="#determine-the-backfilling-period" title="Link to this heading">¶</a></h3>
<p>When you run the backfilling process you need to determine the start time and end time.</p>
<section id="determine-the-start-time">
<h4>Determine the start time<a class="headerlink" href="#determine-the-start-time" title="Link to this heading">¶</a></h4>
<p>The start time is your Prometheus retention time, by default it is set to 15 days. if you are not sure what Prometheus retention time is, you can check by
logging in to your Prometheus server: <cite>http://{ip}:9090/status</cite>.</p>
<p>If you are running Scylla Monitoring version 3.8 or newer for longer than the retention period, you are done! You can skip the rest of this section.</p>
<p>For the rest of this example, we will assume that your retention time is 360 days.</p>
</section>
<section id="determine-the-end-time">
<h4>Determine the end time<a class="headerlink" href="#determine-the-end-time" title="Link to this heading">¶</a></h4>
<p>Typically, you need to back-fill the recording rules when you are using a long retention period, for example, you have a year of retention data,
and you upgraded to Scylla Monitoring 3.8 about three months ago.</p>
<p>If you open the Overview dashboard and look at your entire retention time (in our example 1 year) you will see that while most of the graphs do
show the data, the latency graphs have a missing period, in our example - from the entire year, the latency graph will only show the last three months.</p>
<p>That nine months gap (12 months minus 3) is what we want to fill with back-filling.</p>
<p>The point in time that the graphs start will be your back-filling end time. Check in the graph for the exact time.</p>
</section>
</section>
<section id="backfilling-process">
<h3>Backfilling Process<a class="headerlink" href="#backfilling-process" title="Link to this heading">¶</a></h3>
<section id="id1">
<h4>backup<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<p>If you have a long retention period you are using an external directory that holds the Prometheus data, back it up, in case
If you have a long retention period, you are using an external directory that holds the Prometheus data back it up; if something goes wrong in the process, you can revert the process.</p>
<p>To complete the process you will need to restart the monitoring stack at least once. If you are not using an external directory (The <code class="docutils literal notranslate"><span class="pre">-d</span></code>
command-line option) You cannot complete it.</p>
</section>
<section id="restart-the-monitoring-stack">
<h4>Restart the monitoring stack<a class="headerlink" href="#restart-the-monitoring-stack" title="Link to this heading">¶</a></h4>
<p>You need to stop the monitoring stack and run the <code class="docutils literal notranslate"><span class="pre">stat-all.sh</span></code> command with an additional flag:</p>
<p><code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">&quot;--storage.tsdb.allow-overlapping-blocks&quot;</span></code></p>
</section>
<section id="create-the-data-files">
<h4>Create the data files<a class="headerlink" href="#create-the-data-files" title="Link to this heading">¶</a></h4>
<p>We will use the Promtool utility; it’s already installed for you if you are using the docker container.
You will need the start time and end time for the process, in our example the start time is 360 days ago and the end time is 90 days ago.</p>
<p>The start and end times are in epoc, so you will need to translate the times to epoc.  There are many ways to do this - for example, from the command line.
Run the following command to get the epoc time for 90 days ago: : <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$((`date</span> <span class="pre">+%s`</span> <span class="pre">-</span> <span class="pre">3600*24*90))</span></code></p>
<p>Log in to your docker container and run the following (<code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> should be the start and end in epoc time):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>aprom<span class="w"> </span>sh
<span class="nb">cd</span><span class="w"> </span>/prometheus/data/
promtool<span class="w"> </span>tsdb<span class="w"> </span>create-blocks-from<span class="w"> </span>rules<span class="w"> </span><span class="se">\</span>
--start<span class="w"> </span><span class="nv">$start</span><span class="w"> </span><span class="se">\</span>
--end<span class="w"> </span><span class="nv">$end</span><span class="w"> </span><span class="se">\</span>
--url<span class="w"> </span>http://localhost:9090<span class="w"> </span><span class="se">\</span>
/etc/prometheus/prom_rules/back_fill/3.8/rules.1.yml
</pre></div>
</div>
<p>It will create a <code class="docutils literal notranslate"><span class="pre">data</span></code> directory in the directory where you run it.
The reason to run it under the <code class="docutils literal notranslate"><span class="pre">/prometheus/data/</span></code> is you can be sure Prometheus has write privileges there.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on the time range and the number of cores, the process can take a long time. During testing it took an hour for every week of data,
for a cluster with a total of 100 cores. Make sure that the creation process is not inerupt. You can split the time range to smaller durations
(e.g. instead of an entire year, do it a weeks at a time).</p>
</div>
</div></blockquote>
</section>
<section id="copy-the-data-files">
<h4>Copy the data files<a class="headerlink" href="#copy-the-data-files" title="Link to this heading">¶</a></h4>
<p>Make sure that the process is completed successfully - don’t start this section before you complete the previous sections.</p>
<p>Copy the data files to the Prometheus directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>data/*<span class="w"> </span>.
</pre></div>
</div>
<p>The rules will be evaluated next time Prometheus will perform compaction. You can force it by restarting the server using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">restart</span> <span class="pre">aprom</span></code></p>
<p>Follow the logs <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">aprom</span></code> to see that the process works as expected. If there are no errors, you should now be able to
see the latency graphs over your entire retention time.</p>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../_images/after-backfilling.jpg"><img alt="../_images/after-backfilling.jpg" src="../_images/after-backfilling.jpg" style="width: 400pt;" />
</a>
<figcaption>
<p><span class="caption-text">Un example: after loading half of the data</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
</section>
<section id="related-links">
<h2>Related Links<a class="headerlink" href="#related-links" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="/operating-scylla/monitoring/">Scylla Monitoring</a></p></li>
<li><p><a class="reference internal" href="index.html"><span class="doc">Upgrade</span></a></p></li>
</ul>
</section>
</section>

                    </div>
                    
                        <div class="post-content">
                            
    <div class="feedback-container">
        <p class="feedback-container__title">Was this page helpful?</p>
        <span data-tooltip tabindex="1" title="Yes" data-position="top">
            <button class="feedback-container__button" id="feedback-positive">
                <i class="feedback-container__icon icon-docs-thumbs-up"></i>
            </button>
        </span>
        <span data-tooltip tabindex="1" title="No" data-position="top">
            <button class="feedback-container__button" id="feedback-negative">
                <i class="feedback-container__icon icon-docs-thumbs-down"></i>
            </button>
        </span>
        <div class="feedback-container__message" id="feedback-message"></div>
    </div>

    <script>
        function resetFeedbackButtonActive() {
            const feedbackButtons = document.getElementsByClassName('feedback-container__button');
            for (let i = 0; i < feedbackButtons.length; i++) {
                feedbackButtons[i].classList.remove('active');
            }
        }

        function showMessage(liked) {
            const feedbackMessage = document.getElementById('feedback-message');
            const themeGithubRepository = true;
            let message = 'Great! Thanks for your feedback.';
            if (themeGithubRepository && !liked) {
                message = "Thanks for your feedback! Please don't hesitate to <a href='https://github.com/scylladb/scylla-monitoring/issues/new?title=docs:%20Issue on page Upgrade Guide - Scylla Monitoring 3.x to Scylla Monitoring 4.y&&body=I%20would%20like%20to%20report%20an%20issue%20on%20page%20https://monitoring.docs.scylladb.com/branch-4.0/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation'>create an issue</a> if you have any suggestions on how we can improve.";
            }
            feedbackMessage.innerHTML = message;
        }

        function sendGaEvent(liked) {
            const event_label = liked ? "positive" : "negative";
            const event = "feedback_" + event_label;
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                'event': event,
            });
        }

        const positiveFeebackButton = document.getElementById('feedback-positive');
        const negativeFeedbackButton = document.getElementById('feedback-negative');

        positiveFeebackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(true);
            showMessage(true);
            positiveFeebackButton.classList.add('active');
        });

        negativeFeedbackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(false);
            showMessage(false);
            negativeFeedbackButton.classList.add('active');
        });
    </script>

                            <div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="index.html">
                <button class="navigation__button">
                    <i class="icon-chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Upgrade Scylla Monitoring Stack
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="upgrade-guide-from-monitoring-3.x-to-monitoring-3.y.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Upgrade Guide - Scylla Monitoring 3.x to Scylla Monitoring 3.y
                </div>
                <button class="navigation__button">
                    <i class="icon-chevron-right"></i>
                </button>
            </a>
        
    </div>
</div>
                            <!-- Post content text -->
                        </div>
                    
                
                
                    </div>
                        <div class="sidebar-right large-order-3">
                            <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a class="button button-sm" href="https://github.com/scylladb/scylla-monitoring/issues/new?title=docs:%20Issue on page Upgrade Guide - Scylla Monitoring 3.x to Scylla Monitoring 4.y&&body=I%20would%20like%20to%20report%20an%20issue%20on%20page%20https://monitoring.docs.scylladb.com/branch-4.0/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation"
               target="_blank">
                <i class="icon-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                <a class="button button-sm" href="https://github.com/scylladb/scylla-monitoring/edit/master/docs/source/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.rst"
                   target="_blank">
                    <i class="icon-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Upgrade Guide - Scylla Monitoring 3.x to Scylla Monitoring 4.y</a><ul>
<li><a class="reference internal" href="#upgrade-procedure">Upgrade Procedure</a><ul>
<li><a class="reference internal" href="#install-4-y-the-new-version">Install 4.y (The new version)</a></li>
<li><a class="reference internal" href="#setting-the-server-s-files">Setting the server’s files</a></li>
<li><a class="reference internal" href="#validate-the-new-version-is-running-the-correct-version">Validate the new version is running the correct version</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-in-test-mode">Running in test mode</a><ul>
<li><a class="reference internal" href="#running-second-monitoring-stack">Running second monitoring stack</a></li>
<li><a class="reference internal" href="#killing-the-new-4-y-monitoring-stack-in-testing-mode">Killing the new 4.y Monitoring stack in testing mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#migrating">Migrating</a><ul>
<li><a class="reference internal" href="#move-to-version-4-y-the-new-version">Move to version 4.y (the new version)</a><ul>
<li><a class="reference internal" href="#backup">Backup</a></li>
<li><a class="reference internal" href="#kill-all-containers">Kill all containers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rollback-to-version-3-x">Rollback to version 3.x</a></li>
</ul>
</li>
<li><a class="reference internal" href="#post-installation-metrics-back-filling">Post-installation: Metrics back-filling</a><ul>
<li><a class="reference internal" href="#determine-the-backfilling-period">Determine the backfilling period</a><ul>
<li><a class="reference internal" href="#determine-the-start-time">Determine the start time</a></li>
<li><a class="reference internal" href="#determine-the-end-time">Determine the end time</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backfilling-process">Backfilling Process</a><ul>
<li><a class="reference internal" href="#id1">backup</a></li>
<li><a class="reference internal" href="#restart-the-monitoring-stack">Restart the monitoring stack</a></li>
<li><a class="reference internal" href="#create-the-data-files">Create the data files</a></li>
<li><a class="reference internal" href="#copy-the-data-files">Copy the data files</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#related-links">Related Links</a></li>
</ul>
</li>
</ul>

        </div>
    
</div>
                        </div>
                    </div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="icon-docs-menu-collapse"></i>
    </button>
    <div class="side-nav-content custom-scroll-bar">
        <div class="side-nav__title">
            <a href="../index.html">ScyllaDB Monitoring</a>
        </div>
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions"><ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
    <li class="scylla-dropdown__item">
        <a class="scylla-dropdown__title" href="#">
            
                4.0
            
            <i class="chevron icon-docs-chevron-right"></i>
        </a>
        <ul class="menu scylla-dropdown__content">
            
                
            
                
                    <li>
                        <a href="../../stable/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.12</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.11/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.11</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.10/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.10</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.9/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.9</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.8/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.8</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.7/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.7</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.6/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.6</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.5/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.5</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.4/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.4</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.3/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.3</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.2/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.2</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-4.1/upgrade/upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.1</a>
                    </li>
                
            
                
                    <li>
                        <a href="upgrade-guide-from-monitoring-3.x-to-monitoring-4.y.html">4.0</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-3.10/index.html">3.10</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-3.9/index.html">3.9</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-3.8/index.html">3.8</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-3.7/index.html">3.7</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-3.6/index.html">3.6</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-3.5/index.html">3.5</a>
                    </li>
                
            
            
        </ul>
    </li>
</ul></div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../install/index.html">Download and Install</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../install/monitoring_stack.html">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/start_all.html">The start-all.sh script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/monitor_without_docker.html">Deploy without Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/docker_compose.html">Docker Compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/min-prod-hw.html">System Recommendations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/thanos.html">Using Thanos</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../use-monitoring/index.html">User Guide</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../use-monitoring/cql_optimization.html">CQL Optimization Dashboard</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../use-monitoring/advisor/index.html">Advisor</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/cqlAllowFiltering.html">Some queries use ALLOW FILTERING</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/cqlCLAll.html">Some queries use Consistency Level: ALL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/cqlCLAny.html">Some queries use Consistency Level: ANY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/cqlNoTokenAware.html">Some queries are not token-aware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/cqlNonPaged.html">Some SELECT queries are non-paged</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/cqlNonPrepared.html">Some queries are non-prepared</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/cqlReverseOrder.html">Some queries use reverse order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/heavyCompaction.html">Compaction takes lots of memory and CPU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/nodeCLErrors.html">Some operation failed due to unsatisfied consistency level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/nodeIOErrors.html">I/O Errors can indicate a node with a faulty disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/nodeLocalErrors.html">Some operations failed on the replica side</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/nonBalancedcqlTraffic.html">CQL queries are not balanced among shards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/preparedCacheEviction.html">Prepared statements cache eviction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../use-monitoring/advisor/systemOverload.html">System Overload</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../procedures/index.html">Procedures</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../procedures/alerts/index.html">Alert Manager</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../procedures/alerts/alerting.html">Alerting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../procedures/updating_dashboard.html">Adding and Modifying Dashboards</a></li>
<li class="toctree-l2"><a class="reference external" href="https://docs.scylladb.com/upgrade/upgrade-monitor/">Upgrade Guide</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Upgrade</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon-chevron-right"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Monitoring 3.x to 4.y</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade-guide-from-monitoring-3.x-to-monitoring-3.y.html">Monitoring 3.x to 3.y</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade-guide-from-monitoring-2.x-to-monitoring-3.y.html">Monitoring 2.x to 3.y</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade-guide-from-monitoring-2.x-to-monitoring-2.y.html">Monitoring 2.x to 2.y</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade-guide-from-monitoring-1.x-to-monitoring-2.x.html">Monitoring 1.x to 2.x</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/monitor_troubleshoot.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference external" href="https://docs.scylladb.com/troubleshooting/manager_monitoring_integration/">Troubleshooting Guide for Scylla Manager and Scylla Monitor Integration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/matrix.html">Support Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/monitoring_apis.html">Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/scylladb/scylla-monitoring/">GitHub Project</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com"></a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/" target="_blank">Docs</a>
                <a class="footer-links__link" href="https://docs.scylladb.com/stable/get-started/develop-with-scylladb/tutorials-example-projects.html" target="_blank">Tutorials</a>
                <a class="footer-links__link" href="https://university.scylladb.com/" target="_blank">University</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/"
                    target="_blank">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/" target="_blank">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <i class="icon-slack"></i>
                    </span>
                </a>
                <a class="footer-actions__link" href="https://forum.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="Community forum" data-position="bottom">
                        <i class="icon-docs-community"></i>
                    </span>
                </a>
            </div>
        </div>

        
        <div class="footer-copyright">
            
                
                    &#169; 2025, ScyllaDB. All rights reserved.
                
                | <a class="footer-copyright__link" href="https://www.scylladb.com/tos/" target="_blank">Terms of Service</a>
                | <a class="footer-copyright__link" href="https://www.scylladb.com/privacy/" target="_blank">Privacy Policy</a>
                | ScyllaDB, and ScyllaDB Cloud, are registered trademarks of ScyllaDB, Inc.
            
        </div>
    


        <div class="footer-bottom">
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 16 October 2025.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a class="footer-bottom__link" href="http://sphinx-doc.org/">Sphinx 7.4.7</a> &amp;
                <a class="footer-bottom__link" href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.8.8</a>
            </div>
        </div>
    </div>
    
        <biel-button class="footer-ask-ai" project="ddfdo8m94k" 
            header-title="ScyllaDB chatbot (beta)"
            button-position="bottom-right"
            modal-position="bottom-right"
            button-style="dark">
            Ask AI
        </biel-button>
    
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                    style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>